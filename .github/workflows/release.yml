on: { release: { types: [created] } }

name: Nudge the Release
jobs:
  generate:
    name: Create release-artifacts
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the repository
        uses: actions/checkout@master
      - name: Setup Deno
        uses: denoland/setup-deno@v1.1.0
      - name: Show deno version
        run: deno --version
      - name: ğŸ”¨ Nudge for ğŸ ğŸ’ª
        run: >-
          deno compile
          --allow-net
          --allow-run
          --target=aarch64-apple-darwin
          --output aarch64-apple-darwin/nudge
          nudge.ts
      - name: Nudge the ğŸ ğŸ’ª binary
        uses: actions/upload-artifact@v3.0.0
        with:
          name: aarch64-apple-darwin
          path: aarch64-apple-darwin/nudge
      - name: ğŸ”¨ Nudge for ğŸ
        run: >-
          deno compile
          --allow-net
          --allow-run
          --target=x86_64-apple-darwin
          --output x86_64-apple-darwin/nudge
          nudge.ts
      - name: Nudge the ğŸ binary
        uses: actions/upload-artifact@v3.0.0
        with:
          name: x86_64-apple-darwin
          path: x86_64-apple-darwin/nudge
      - name: ğŸ”¨ Nudge for ğŸ§
        run: >-
          deno compile
          --allow-net
          --allow-run
          --target=x86_64-unknown-linux-gnu
          --output x86_64-unknown-linux-gnu/nudge
          nudge.ts
      - name: Nudge the ğŸ§ binary
        uses: actions/upload-artifact@v3.0.0
        with:
          name: x86_64-unknown-linux-gnu
          path: x86_64-unknown-linux-gnu/nudge
